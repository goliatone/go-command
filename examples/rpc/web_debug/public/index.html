<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>RPC Web Debug Demo</title>
  <link rel="stylesheet" href="/public/styles.css" />
</head>
<body>
  <div class="bg-orb orb-a"></div>
  <div class="bg-orb orb-b"></div>

  <main class="layout">
    <header class="hero card">
      <p class="eyebrow">go-command rpc demo</p>
      <h1>RPC Command Trigger Console</h1>
      <p>
        Trigger commands and queries exposed via RPC, then inspect raw payloads and responses
        in a live debug panel.
      </p>
    </header>

    <section class="card controls">
      <h2>Quick Actions</h2>
      <div class="field-row">
        <label for="actor-id">Actor ID</label>
        <input id="actor-id" type="text" value="demo-user" />
      </div>
      <div class="field-row">
        <label for="counter-amount">Increment Amount</label>
        <input id="counter-amount" type="number" value="1" min="1" step="1" />
      </div>
      <div class="button-row">
        <button id="btn-increment">Increment</button>
        <button id="btn-snapshot" class="btn-alt">Snapshot</button>
        <button id="btn-reset" class="btn-danger">Reset</button>
      </div>
      <div class="state-box">
        <div class="state-item"><span>Counter</span><strong id="counter-value">0</strong></div>
        <div class="state-item"><span>Last Actor</span><strong id="counter-actor">-</strong></div>
        <div class="state-item"><span>Updated</span><strong id="counter-updated">-</strong></div>
      </div>
    </section>

    <section class="card endpoints">
      <h2>Registered Endpoints</h2>
      <div id="endpoint-list" class="endpoint-list"></div>
    </section>

    <section class="card custom-call">
      <h2>Custom RPC Call</h2>
      <div class="field-row">
        <label for="method-name">Method</label>
        <input id="method-name" type="text" value="counter.snapshot" />
      </div>
      <label for="params-json" class="text-label">Params JSON</label>
      <textarea id="params-json" spellcheck="false">{
  "data": {},
  "meta": {
    "actorId": "demo-user"
  }
}</textarea>
      <div class="button-row">
        <button id="btn-send-custom">Send RPC Request</button>
      </div>
    </section>

    <section class="card debug-panel">
      <h2>Debug Panel</h2>
      <p class="panel-help">Newest request shown first. Raw JSON is preserved for debugging and replay.</p>
      <div id="traffic-log" class="traffic-log"></div>
    </section>
  </main>

  <script src="/public/app.js"></script>
</body>
</html>
